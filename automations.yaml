- id: led_state
  alias: 'MQTT LED state'
  trigger:
    platform: mqtt
    topic: "luz/status"
  action:
    - service: persistent_notification.create
      data:
        message: 'Message Payload on luz/status: {{ states.sensor.luz.state }}'
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.successful_command

- id: led_availability
  alias: 'MQTT LED availability'
  trigger:
    platform: mqtt
    topic: "luz/available"
  action:
    - service: persistent_notification.create
      data:
        message: 'Message Payload on luz/available: {{ trigger.event }}'
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.successful_command

- id: command_success_tts
  alias: 'command success TTS'
  trigger:
    - platform: state
      entity_id: input_boolean.successful_command
  action:
    - service: script.say_command_success
      data:
        message: 'Seu desejo é uma ordem!'
    - service: persistent_notification.create
      data:
        message: 'Seu desejo é uma ordem!'

- id: command_success_post_config
  alias: 'Turn off Command Success Boolean'
  trigger:
    platform: time
    seconds: 5
  condition:
    condition: state
    entity_id: input_boolean.successful_command
    state: 'on'
  action:
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.successful_command
    - service: persistent_notification.create
      data:
        message: 'Command Success turned off'